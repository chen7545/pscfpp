Design choices / conventions:
=============================

   (1) As for the code for real periodic fields, there will be a CPU version
   of the complex Langevin code and a GPU version. Code for the cpu version
   will be placed in directory src/cpc and code for the gpu version will be 
   in directory src/cpg. 

   (1) Program-level namespaces for CL-FTS will be named Pscf::Cpc (CPU 
   version) and Pscf::Cpg (GPU version), where the acronyms stand for 
   Cpc -> complex periodic CPU and Cpg -> complex periodic GPU

   (2) There will be no Basis class used in these program-level namespaces, 
   and thus no symmetry-adapted Fourier basis avialable for use in these 
   complex Langevin codes.

   Rationale: 

       (1) SCFT with an imposed symmetry can already be done with existing
       codes. Fluctuating FTS fields don't have an exact symmetry.

       (2) The Basis class was originally designed for real fields, 
       using the indexing system for RFieldDft with implicit waves. 
       It would have to be redesigned to describe a Fourier bassis 
       for a general complex field.

       (3) Leaving out the space group symmetry doesn't prevent the
       later addition of SCFT with complex fields, which could still
       be done using iterator algorithms that don't impose a symmetry.

   (3) In Pscf::Cpc CPU code, use double and fftw_complex as basic types

   (4) In Pscf::Cpg GPU code use the cudaReal and cudaComplex as defined
   in the prdc/cuda/types.h file. 

   (5) In Pscf::Cpg namespace, allow "using namespace Pscf::Prdc" and
   "using namespace Pscf::Prdc::Cuda", so that field and FFT classes 
   defined in Prdc::Cuda are used by default (e.g., for RField, RFieldDft, 
   CField, and FFT), but allow explicit use of the Cpu:: qualifier to 
   specify occasional use of classes defined in Prdc::Cpu.

Programming tasks:
==================

Mathematics:

  In namespaces Prdc::Cpu and Prdc::Cuda :

  - Create class CField  (Done)

  - Create class CFieldComparison (Done)

  - Add complex->complex Fourier transform functions to FFT classes (Done)

  - Add complex.h files to define functions for basic arithmetic
    operations for both type so of complex number (done)

  - Add functions that compute and assign complex exponentials and 
    complex logarithms for the complex data types used in the two
    codes.

Solvers:

  - Convert unscoped enum Pscf::Species::Ensemble to a enum class
    Pscf::Ensemble (done).

  - In pscf/chem, turn Species, SolventSpecies and PolymerSpecies 
    classes into templates with a template type parameter WT (the type 
    of the w fields). Use WT = double as a default. Modify functions to
    use function templates for assignment, computation of exponential,
    logarithms etc. 

  - Modify solver template classes (PropagatorTmpl, BlockTmpl) as
    needed.

  - In Cpc and Cpg, create Propagator and Block classes

  - In Cpc and Cpg, create Polymer and Mixture classes (almost unchanged)

  - Create an appropriate Interaction class (nonlocal by default)

  - Create System (Mixture, Interaction, Step) with built-in CL sampling

Templates in namespace Prdc:

  - Create subdirectories rl and cl for code that is specific to real
    and complex (or complex Langevin code)

  - Move templates that are specific to real periodic to prdc/rl. These
    include:

       rl/DomainTmpl
       rl/CFieldsTmpl
       rl/WFieldsTmpl
       rl/FieldIoTmpl
       rl/MaskTmpl
       rl/fieldIoUtil
       rl/SystemTmpl
       rl/SystemConstRefTmpl
       rl/ScftThermoTmpl
       rl/MixturePrdc
       rl/MixtureModifierPrdc

  - Create nested namespaces Prdc::Rl:: and Prdc::Cl, allowing use of
    short names

       rl/Domain  ->  Pscf::Prdc::Rl::Domain, etc.
       rl/CFields
       rl/WFields
       rl/FieldIo
       rl/Mask
       rl/fieldIoUtil
       rl/System
       rl/SystemConstRef
       rl/ScftThermo
       rl/Mixture
       rl/MixtureModifier

       cl/Domain  -> Pscf::Prdc::Cl::Domain, etc.
       cl/CFields
       cl/WFields
       cl/FieldIo
       cl/fieldIoUtil
       cl/System
       cl/SystemConstRef
       cl/Mixture
       cl/MixtureModifier

  - Differences between real and complex code:

      * Cl::Domain will not contain a SpaceGroup or Basis

      * Cl::FieldIoCl will not support basis format, and will not
        need to provide any conversion functions involving basis
        format.

      * Cl::Fields and Cl::WFields will not support basis format

      * There will not be any class Prdc::Cl::Mask

      * Functions in cl/fieldIoUtil will be defined in Prdc::Prdc::Cl

      * Cl::System will not support SCFT or an Environment.

      * Cl::System will contain built in support for CL sampling,
        including a Step class and an AnalyzerManager.

Interaction Class:

  - Each functionally distinct class of programs will have its own
    interaction class. Cpu and Gpu versions of equivalent programs will 
    share an Interaction class defined in Prdc::Rl or Prdc::Cl .

  - Copy existing Pscf::Interaction class to R1d::Interaction and
    Prdc::Rl::Interaction

  - Create a new Prdc::Cl::Interaction for compressible system with 
    nonzero range interactions.

Sequence of programming tasks:
------------------------------

  Stage A: Make changes outlined above to get to the point of having a 
  functional version of existing code that is designed to allow easy
  generalization to CL-FTS (implemented mostly by Morse)

  Stage B: Create actual new classes for CL-FTS. Possible order of 
  creation:

    - Cl::FieldIo (simple version for r-grid file IO)
    - Cl::Domain  (will need WaveList for solvers)
    - Cpc::Solvers
    - Cl:CFields and Cl::WFields (if needed)
    - Cl::System
    - Cl::Step
    - Cl::Analyzer and Cl::AnalyzerManager

